!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.Autosuggest=t(require("React")):e.Autosuggest=t(e.React)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1).default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(2),l=o(a),c=n(3),d=o(c),f=n(!function(){var e=new Error('Cannot find module "react-autowhatever"');throw e.code="MODULE_NOT_FOUND",e}()),p=o(f),S=function(){return!0},v=function(e){return e.trim().length>0},h={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFocused:"react-autosuggest__suggestion--focused",sectionContainer:"react-autosuggest__section-container",sectionTitle:"react-autosuggest__section-title"},m=function(e){var t={};for(var n in e)switch(n){case"suggestionsContainer":t.itemsContainer=e[n];break;case"suggestion":t.item=e[n];break;case"suggestionFocused":t.itemFocused=e[n];break;case"suggestionsList":t.itemsList=e[n];break;default:t[n]=e[n]}return t},y=function(e){function t(e){var n=e.alwaysRenderSuggestions;s(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return C.call(o),o.state={isFocused:!1,isCollapsed:!n,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},o.justPressedUpDown=!1,o}return i(t,e),g(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown)}},{key:"componentWillReceiveProps",value:function(e){(0,d.default)(e.suggestions,this.props.suggestions)?e.focusFirstSuggestion&&e.suggestions.length>0&&this.justPressedUpDown===!1&&this.focusFirstSuggestion():this.willRenderSuggestions(e)?(e.focusFirstSuggestion&&this.focusFirstSuggestion(),this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions()):this.resetFocusedSuggestion()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown)}},{key:"inputFocused",value:function(e){this.setState({isFocused:!0,isCollapsed:!e})}},{key:"inputBlurred",value:function(e){this.setState({isFocused:!1,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null,isCollapsed:!e})}},{key:"inputChanged",value:function(e){this.setState({focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null,isCollapsed:!e})}},{key:"updateFocusedSuggestion",value:function(e,t,n){var o=this.state.valueBeforeUpDown;null===t?o=null:null===o&&"undefined"!=typeof n&&(o=n),this.setState({focusedSectionIndex:e,focusedSuggestionIndex:t,valueBeforeUpDown:o})}},{key:"resetFocusedSuggestion",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.state.valueBeforeUpDown;this.setState({focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:e?null:t})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,t){var n=this.props,o=n.suggestions,s=n.multiSection,u=n.getSectionSuggestions;return s?u(o[e])[t]:o[t]}},{key:"getFocusedSuggestion",value:function(){var e=this.state,t=e.focusedSectionIndex,n=e.focusedSuggestionIndex;return null===n?null:this.getSuggestion(t,n)}},{key:"getSuggestionValueByIndex",value:function(e,t){var n=this.props.getSuggestionValue;return n(this.getSuggestion(e,t))}},{key:"getSuggestionIndices",value:function(e){var t=e.getAttribute("data-section-index"),n=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,suggestionIndex:parseInt(n,10)}}},{key:"findSuggestionElement",value:function(e){var t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentNode}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,t,n){var o=this.props.inputProps,s=o.value,u=o.onChange;t!==s&&u(e,{newValue:t,method:n})}},{key:"willRenderSuggestions",value:function(e){var t=e.suggestions,n=e.inputProps,o=e.shouldRenderSuggestions,s=n.value;return t.length>0&&o(s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.suggestions,o=t.renderInputComponent,s=t.renderSuggestionsContainer,u=t.onSuggestionsFetchRequested,i=t.renderSuggestion,g=t.inputProps,a=t.multiSection,c=t.renderSectionTitle,d=t.id,f=t.getSectionSuggestions,v=t.theme,h=t.getSuggestionValue,y=t.alwaysRenderSuggestions,C=this.state,w=C.isFocused,x=C.isCollapsed,I=C.focusedSectionIndex,b=C.focusedSuggestionIndex,k=C.valueBeforeUpDown,F=y?S:this.props.shouldRenderSuggestions,D=g.value,_=g.onFocus,O=g.onKeyDown,R=this.willRenderSuggestions(this.props),j=y||w&&!x&&R,P=j?n:[],B=r({},g,{onFocus:function(t){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var n=F(D);e.inputFocused(n),_&&_(t),n&&u({value:D})}},onBlur:function(t){return e.justClickedOnSuggestionsContainer?void e.input.focus():(e.blurEvent=t,void(e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested())))},onInput:function(t){var n=t.target.value,o=F(n);e.maybeCallOnChange(t,n,"type"),e.inputChanged(o),o?u({value:n}):e.onSuggestionsClearRequested()},onKeyDown:function(t,o){switch(t.key){case"ArrowDown":case"ArrowUp":if(x)F(D)&&(u({value:D}),e.revealSuggestions());else if(n.length>0){var s=o.newFocusedSectionIndex,i=o.newFocusedItemIndex,r=void 0;r=null===i?null===k?D:k:e.getSuggestionValueByIndex(s,i),e.updateFocusedSuggestion(s,i,D),e.maybeCallOnChange(t,r,"ArrowDown"===t.key?"down":"up")}t.preventDefault(),e.justPressedUpDown=!0,setTimeout(function(){e.justPressedUpDown=!1});break;case"Enter":var g=e.getFocusedSuggestion();if(j&&!y&&e.closeSuggestions(),null!==g){var a=h(g);e.maybeCallOnChange(t,a,"enter"),e.onSuggestionSelected(t,{suggestion:g,suggestionValue:a,suggestionIndex:b,sectionIndex:I,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout(function(){e.justSelectedSuggestion=!1})}break;case"Escape":j&&t.preventDefault();var l=j&&!y;if(null===k){if(!l){var c="";e.maybeCallOnChange(t,c,"escape"),F(c)?u({value:c}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(t,k,"escape");l?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetFocusedSuggestion()}O&&O(t)}}),E={query:(k||D).trim()};return l.default.createElement(p.default,{multiSection:a,items:P,renderInputComponent:o,renderItemsContainer:s,renderItem:i,renderItemData:E,renderSectionTitle:c,getSectionItems:f,focusedSectionIndex:I,focusedItemIndex:b,inputProps:B,itemProps:this.itemProps,theme:m(v),id:d,ref:this.storeReferences})}}]),t}(a.Component);y.defaultProps={shouldRenderSuggestions:v,alwaysRenderSuggestions:!1,multiSection:!1,focusInputOnSuggestionClick:!0,focusFirstSuggestion:!1,theme:h,id:"1"};var C=function(){var e=this;this.onDocumentMouseDown=function(t){e.justClickedOnSuggestionsContainer=!1;var n=t.detail&&t.detail.target||t.target;do{if(null!==n.getAttribute("data-suggestion-index"))return;if(n===e.suggestionsContainer)return void(e.justClickedOnSuggestionsContainer=!0);n=n.parentNode}while(null!==n&&n!==document)},this.storeReferences=function(t){if(null!==t){var n=t.input,o=t.itemsContainer;e.input=n,e.suggestionsContainer=o}},this.onSuggestionMouseEnter=function(t,n){var o=n.sectionIndex,s=n.itemIndex;e.updateFocusedSuggestion(o,s)},this.focusFirstSuggestion=function(){e.updateFocusedSuggestion(e.props.multiSection?0:null,0)},this.onSuggestionMouseDown=function(){e.justSelectedSuggestion=!0},this.onSuggestionsClearRequested=function(){var t=e.props.onSuggestionsClearRequested;t&&t()},this.onSuggestionSelected=function(t,n){var o=e.props,s=o.alwaysRenderSuggestions,u=o.onSuggestionSelected,i=o.onSuggestionsFetchRequested;u&&u(t,n),s?i({value:n.suggestionValue}):e.onSuggestionsClearRequested(),e.resetFocusedSuggestion()},this.onSuggestionClick=function(t){var n=e.props,o=n.alwaysRenderSuggestions,s=n.focusInputOnSuggestionClick,u=e.getSuggestionIndices(e.findSuggestionElement(t.target)),i=u.sectionIndex,r=u.suggestionIndex,g=e.getSuggestion(i,r),a=e.props.getSuggestionValue(g);e.maybeCallOnChange(t,a,"click"),e.onSuggestionSelected(t,{suggestion:g,suggestionValue:a,suggestionIndex:r,sectionIndex:i,method:"click"}),o||e.closeSuggestions(),s===!0?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})},this.onBlur=function(){var t=e.props,n=t.inputProps,o=t.shouldRenderSuggestions,s=n.value,u=n.onBlur,i=e.getFocusedSuggestion();e.inputBlurred(o(s)),u&&u(e.blurEvent,{focusedSuggestion:i})},this.resetFocusedSuggestionOnMouseLeave=function(){e.resetFocusedSuggestion(!1)},this.itemProps=function(t){var n=t.sectionIndex,o=t.itemIndex;return{"data-section-index":n,"data-suggestion-index":o,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.resetFocusedSuggestionOnMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionMouseDown,onClick:e.onSuggestionClick}}};t.default=y},function(t,n){t.exports=e},function(e,t){e.exports=function(e,t){if(e===t)return!0;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(e[o]!==t[o])return!1;return!0}}])});